.TH BAMMDNM 1 "March 2014" BIOBAMBAM
.SH NAME
bammdnm - compute MD and NM fields
.SH SYNOPSIS
.PP
.B bammdnm
[options]
.SH DESCRIPTION
bammdnm reads a coordinate sorted BAM file from standard input, fills the
MD and NM auxilliary fields for each mapped read fragment and writes
the resulting data to a BAM file on standard output.
.PP
The following key=value pairs can be given:
.PP
.B reference=<>:
file name of the reference in uncompressed or compressed FastA format. This field is required, i.e. the
program will quit if the key is not given. 
Uncompressed FastA is expected in general FastA file format. A FastA index
(.fai file) is required. This index can be created while reformatting the
input file using normalisefasta.
Compressed FastA can be provided in two forms.
The first form is the format generated by the razip program. In this case a
razf file and a corresponding FastA index file (.fai) is required.
The second form can be generated by normalisefasta using the setting bgzf=1.
The index optionally created by normalisefasta when setting the index key is
required for bammdnm. The index file has to be stored as ref.fa.bgzf.idx
for a compressed reference file name of ref.fa.bgzf.
.PP
.B level=<-1|0|1|9|11>:
set compression level of the output BAM file. Valid
values are
.IP -1:
zlib/gzip default compression level
.IP 0:
uncompressed
.IP 1:
zlib/gzip level 1 (fast) compression
.IP 9:
zlib/gzip level 9 (best) compression
.P
If libmaus has been compiled with support for igzip (see
https://software.intel.com/en-us/articles/igzip-a-high-performance-deflate-compressor-with-optimizations-for-genomic-data)
then an additional valid value is
.IP 11:
igzip compression
.PP
.B verbose=<0|1>:
print progress report while processing the file. Valid values are
.IP 0:
do not print progress report
.IP 1:
print progress report (default)
.PP
.B disablevalidation=<0|1>:
disable input validation. Valid values are
.IP 0:
check validity of input data (default)
.IP 1:
do not check validity of input data
.PP
.B tmpfile=<filename>:
prefix for temporary files. By default temporary files are created in the current directory.
.PP
.B md5=<0|1>:
md5 checksum creation for output file. Valid values are
.IP 0:
do not compute checksum. This is the default.
.IP 1:
compute checksum. If the md5filename key is set, then the checksum is
written to the given file. If md5filename is unset, then no checksum will be computed.
.PP
.B md5filename
file name for md5 checksum if md5=1.
.PP
.B index=<0|1>:
compute BAM index for output file. Valid values are
.IP 0:
do not compute BAM index. This is the default.
.IP 1:
compute BAM index. If the indexfilename key is set, then the BAM index is
written to the given file. If indexfilename is unset, then no BAM index will be computed.
.PP
.B indexfilename
file name for index file if index=1.
.PP
.B recompindetonly=<0|1>:
only compute/recompute MD and NM fields if the read or reference in the relevant
region contain indeterminate (non A, C, G or T) bases. Valid values are
.IP 0:
compute/recompute all MD and NM fields. This is the default.
.IP 1:
only recompute if indeterminate bases are involved
.PP
.B warnchange=<0|1>:
warn if values for the MD and NM fields are already present but different
from the newly computed ones. Valid values are
.IP 0:
do not warn about changes. This is the default.
.IP 1:
print a warning message when changing previously stored values
.PP
.B ioblocksize=<128k>:
block size used for I/O operations
.SH AUTHOR
Written by German Tischler.
.SH "REPORTING BUGS"
Report bugs to <gt1@sanger.ac.uk>
.SH COPYRIGHT
Copyright \(co 2009-2014 German Tischler, \(co 2011-2014 Genome Research Limited.
License GPLv3+: GNU GPL version 3 <http://gnu.org/licenses/gpl.html>
.br
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
